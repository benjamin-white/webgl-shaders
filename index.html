<!DOCTYPE html>

<html>

	<head>
		<meta charset=utf-8>
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<title>THREE.js Sandbox</title>
		<link rel="stylesheet" type="text/css" href="main.css">
	</head>

  <body>

    <main id="js-threeViewer"></main>

    <footer>

      <script src="../lib/three-js/three.js"></script>
    	<script src="../lib/three-js/detector.js"></script>
    	<script src="../lib/toxiclibs/toxiclibs.min.js"></script>
      <script id="vertexShader" type="x-shader/x-vertex">

				varying vec2 vUv;

			  void main() {
			    vUv         = uv;
			    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
			  }

      </script>
      <script id="fragmentShader" type="x-shader/x-fragment">

			  #ifdef GL_ES
        precision mediump float;
        #endif

				uniform vec3 colorStopOne;
        uniform vec3 colorStopTwo;
				uniform float u_time;
				uniform vec2 u_mouse;
        varying vec2 vUv;

				void main() {
					vec3 color   = mix(colorStopOne, vec3(abs(sin(u_time)), abs(sin(u_time)), abs(sin(u_time))), vUv.x);
					gl_FragColor = vec4(color, 1.0);
				}

      </script>
			<script id="shaderTest" type="x-shader/x-fragment">

				#ifdef GL_ES
				precision mediump float;
				#endif

				#define PI 3.14159265359
				#define TWO_PI 6.28318530718

				uniform vec2  u_resolution;
				uniform vec2  u_mouse;
				uniform float u_time;

				float plot(vec2 st, float pct) {
				  return smoothstep(pct - 0.02, pct, st.y) - smoothstep(pct, pct + 0.02, st.y);
				}

				vec3 hsb2rgb(in vec3 c) {

			    vec3 rgb = clamp(
						abs(mod(c.x * 6.0 + vec3(0.0, 4.0, 2.0), 6.0) - 3.0) - 1.0,
			      0.0,
			      1.0
					);

			    rgb = rgb * rgb * (3.0 - 2.0 * rgb);
			    return c.z * mix(vec3(1.0), rgb, c.y);

				}

				void main() {

					vec2 st       = gl_FragCoord.xy / u_resolution;
					vec2 toCenter = vec2(0.5) - st;
					float angle   = pow(atan(toCenter.y, toCenter.x), 4.0);
					float radius  = length(toCenter) * 2.0;
					vec3 color    = hsb2rgb(vec3(angle / TWO_PI + abs(sin(u_resolution.x)), radius, 1.0));
					gl_FragColor  = vec4(color, 1.0);

				}

      </script>
			<script id="shaderTestTwo" type="x-shader/x-fragment">

			  #ifdef GL_ES
			  precision mediump float;
			  #endif

				#define PI 3.14159265359
        #define TWO_PI 6.28318530718

				uniform vec2 u_resolution;
				uniform float u_time;

				float circle(in vec2 posXY, in float radius) {

					vec2 dist = posXY - vec2(.5);
					return 1. - smoothstep(
						radius - radius * .01,
						radius + radius * .01,
						dot(dist, dist) * 4.
					);

				}

				vec3 makeShape(in vec2 pos, in int sides) {

					float radius = TWO_PI / float(sides);
					pos.x        *= u_resolution.x / u_resolution.y;
					float sdf    = .0;
					pos          = pos * 2. - 1.; // remap the space to -1, 1
					float angle  = atan(pos.x, pos.y) + PI;
					sdf          = cos(floor(.5 + angle / radius) * radius - angle) * length(pos);

					return vec3(1. - smoothstep(.4, .41, sdf));

				}

				void main() {

					vec2 pos     = gl_FragCoord.xy / u_resolution.xy;
					gl_FragColor = vec4(makeShape(pos, 5), 1.);

				}

			</script>
      <script src="modules/material-preview.js"></script>

    </footer>

  </body>

</html>
